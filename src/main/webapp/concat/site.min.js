"undefined"==typeof File&&(File=function(){return!1}),"undefined"==typeof console&&(console={log:function(){}}),function(){function a(a,b){b.otherwise("/welcome"),a.state("welcome",{url:"/welcome",templateUrl:"views/login.html",controller:"AuthCtrl as auth"}).state("profile",{url:"/profile",templateUrl:"views/profile.html",controller:"ProfileCtrl as profile"})}function b(){}function c(a,b,c){function d(b){localStorage.setItem("LS",JSON.stringify(b)),vm.loginError=!1,a.go("profile")}function e(b){vm.loginError=!0,a.go("welcome")}function f(b){var c={keyid:b.keyid,accountId:b.accountId};localStorage.setItem("LS",JSON.stringify(c)),vm.passwordError=!1,a.go("profile","test from onSignupSuccess ###")}function g(b){vm.passwordError=!0,a.go("welcome")}vm=this,vm.test="altceva",vm.username="",vm.password="",vm.usernameSignup="",vm.passwordSignup="",vm.passwordError=!1,vm.loginError=!1;var h=b.$$protocol+"://"+b.$$host+":"+b.$$port+"/sec/";vm.login=function(a,b){if(""!=a&&""!=b){var f={username:a,password:b},g=h+"resources/account/login";c.createItemAuth(f,g).then(angular.bind(this,d),angular.bind(this,e))}},vm.signup=function(a,b){if(""!=a&&""!=b){var d={username:a,password:b,email:a},e=h+"resources/account/create";c.createItemAuth(d,e).then(angular.bind(this,f),angular.bind(this,g))}}}function d(a,b,c,d,e,f){function g(a){_(a).forEach(function(a){function b(b){b.error||(a.imageComments=b)}function f(a){}a.showComments=!1,a.path=d.$$protocol+"://"+d.$$host+":"+d.$$port+"/img/"+a.path;var g=JSON.parse(localStorage.getItem("LS"));return null==g?void c.go("welcome"):void e.loadStuff(u+"resources/protected/comment/"+a.imageid).then(angular.bind(this,b),angular.bind(this,f))}),vm.pictures=a,b.$$phase||b.$digest()}function h(a){}function i(a){q(vm.userId)}function j(a){}function k(a){}function l(a){}function m(a){vm.users=a}function n(a){}function o(){vm.fileTypeError=!1,q(vm.userId),b.$$phase||b.$digest()}function p(a){vm.fileTypeError=!0}function q(a){JSON.parse(localStorage.getItem("LS"));e.loadStuff(u+"resources/protected/file/getallimages/"+a).then(angular.bind(this,g),angular.bind(this,h))}function r(){JSON.parse(localStorage.getItem("LS"));e.loadStuff(u+"resources/protected/account/getallusers").then(angular.bind(this,m),angular.bind(this,n))}function s(a){}function t(a,b,c,d,e){s(d.name)}if(vm=this,vm.profiletest="Profile Test",vm.myPic="",vm.fileTypeError=!1,null==localStorage.getItem("LS"))return void c.go("welcome");if(vm.userId=JSON.parse(localStorage.getItem("LS")).accountId,null==vm.userId)return void c.go("welcome");vm.imageId="1",vm.mySharer="Test mySharer",vm.myFile="",vm.errorUpload="";var u=d.$$protocol+"://"+d.$$host+":"+d.$$port+"/sec/";vm.inputUpload=function(){vm.fileTypeError=!1},vm.uploadPic=function(){vm.fileTypeError=!1;var a=vm.myFile;if(""!=a){var b="resources/protected/file";f.uploadFileToUrl(a,b,vm.userId).then(angular.bind(this,o),angular.bind(this,p)),vm.errorUpload=""}else console.log("file is empty, dude"),vm.errorUpload="Please make sure the picture is chosen. Your upload cannot be empty."},vm.addComment=function(a,b){commentData={comment:a,userId:vm.userId,imageId:b},vm.commBody="";var c=JSON.parse(localStorage.getItem("LS"));f.createItem(commentData,u+"resources/protected/comment",c).then(angular.bind(this,i),angular.bind(this,j))},vm.shareWith=function(a,b){var c={imageId:b,author:vm.userId,victim:a},d=JSON.parse(localStorage.getItem("LS"));f.createItem(c,u+"resources/protected/file/shareimage",d).then(angular.bind(this,k),angular.bind(this,l))},vm.logout=function(){localStorage.removeItem("LS"),c.go("welcome")},q(vm.userId),r(),a.$on("$stateChangeSuccess",t)}function e(a,b,c){function d(a,b){var d=JSON.parse(localStorage.getItem("LS"));if(null==d)return void c.go("welcome");var e={id:d.accountId,algorithm:"sha256",key:d.keyid},f={credentials:e};console.log("### from CrudService ###, uploadUrl",a);var g=hawk.client.header(a,b,f);return null!=g.err?(alert(g.err),null):(console.log("### from CrudService ###, header from the method itself",g),g)}function e(c,e,f){var g=a.defer(),h=d("sec/"+e,"POST");console.log("### from CrudService ###, header from the uploadFileToUrl",h);var i=new FormData;return i.append("file",c),i.append("userid",f),b.post(e,i,{transformRequest:angular.identity,headers:{"Content-Type":"multipart/form-data",Authorization:h.field}}).success(function(){g.resolve()}).error(function(){g.reject("Failed to uploadFileToUrl")}),g.promise}function f(c,e,f){var g=a.defer(),h=d(e,"POST");return b({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:h.field},data:$.param(c)}).success(function(a){g.resolve(a)}).error(function(){g.reject("Failed to create item")}),g.promise}function g(c,d){var e=a.defer();return b({method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(c)}).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to create item")}),e.promise}function h(c,e){var f=a.defer(),g=d(e,"POST");return b.post(e,c,{transformRequest:angular.identity,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:g.field}}).success(function(a){f.resolve(a)}).error(function(){f.reject("Failed to update item")}),f.promise}function i(c,d){var e=a.defer();return b["delete"](d+"/"+c.id).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to delete item with id"+c.id)}),e.promise}var j={createItem:f,createItemAuth:g,updateItem:h,deleteItem:i,uploadFileToUrl:e};return j}function f(a,b,c){function d(a,b){var d=JSON.parse(localStorage.getItem("LS"));if(null==d)return void c.go("welcome");var e={id:d.accountId,algorithm:"sha256",key:d.keyid},f={credentials:e},g=window.location.href,h=g.split("/");g=h[0]+"//"+h[2];var i=hawk.client.header(a,b,f);return null!=i.err?null:i}function e(c){var e=a.defer(),f=d(c,"GET");return null!=f?(b({method:"GET",url:c,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:f.field}}).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to get stuff from url "+c)}),e.promise):void 0}var f={loadStuff:e};return f}a.$inject=["$stateProvider","$urlRouterProvider"],c.$inject=["$state","$location","CrudService"],d.$inject=["$rootScope","$scope","$state","$location","DataService","CrudService"],e.$inject=["$q","$http","$state"],f.$inject=["$q","$http","$state"],angular.element(document).ready(function(g){var h=[];h.push("ui.router"),angular.module("mySASSFrontend",h).value("events",{}).controller("AuthCtrl",c).controller("ProfileCtrl",d).directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]).factory("CrudService",e).factory("DataService",f).config(a).run(b),angular.bootstrap(angular.element("#ng-app"),["mySASSFrontend"])})}();