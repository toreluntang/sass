"undefined"==typeof File&&(File=function(){return!1}),"undefined"==typeof console&&(console={log:function(){}}),function(){function a(a,b){b.otherwise("/welcome"),a.state("welcome",{url:"/welcome",templateUrl:"views/login.html",controller:"AuthCtrl as auth"}).state("profile",{url:"/profile",templateUrl:"views/profile.html",controller:"ProfileCtrl as profile"})}function b(){}function c(a){function b(a){console.log("onLoginSuccess",a);var b={accountid:a.accountid,Auth:a.Auth};localStorage.setItem("kgjsh",JSON.stringify(b))}function c(a){console.log("onLoginError",a)}vm=this,vm.test="altceva",vm.username="",vm.password="",vm.login=function(d,e){if(console.log("login clicked!!!",d,e),""!=d&&""!=e){var f={username:d,password:e},g="http://localhost:8080/sec/resources/account/login";a.createItemAuth(f,g).then(angular.bind(this,b),angular.bind(this,c))}else console.log("username and pass are required")}}function d(a,b,c,d){function e(a){console.log("onLoadImagsSuccess RIGHT ONE"),_(a).forEach(function(a){function b(b){console.log("onLoadImageCommentsSuccess",b),b.error?console.log("DATA ERROR onLoadImageCommentsSuccess"):a.imageComments=b}function d(a){console.log("onLoadImageCommentsError: no comments found for this image",a)}console.log(a),a.showComments=!1;var e=JSON.parse(localStorage.getItem("kgjsh"));c.loadStuff("http://localhost:8080/sec/resources/protected/comment?imageId="+a.imageid,e).then(angular.bind(this,b),angular.bind(this,d))}),console.log("Images after adding comments are: ",a),vm.pictures=a,b.$$phase||b.$digest()}function f(a){console.log("onLoadImagsError",a)}function g(a){console.log("onCreateCommentSuccess",a),o(vm.userId)}function h(a){console.log("onCreateCommentError",a)}function i(a){console.log("onSharePicSuccess",a)}function j(a){console.log("onSharePicError",a)}function k(a){console.log("onLoadUsersSuccess USEEEEERS",a),vm.users=a}function l(a){console.log("onLoadUsersError",a)}function m(){console.log("onUploadSuccess: final from ProfileCtrl"),o(vm.userId),b.$$phase||b.$digest(),console.log("### Tried to get all images ###")}function n(a){console.log("onUploadError: final from ProfileCtrl",a)}function o(a){var b=JSON.parse(localStorage.getItem("kgjsh"));c.loadStuff("http://localhost:8080/sec/resources/file/getallimages?id="+a,b).then(angular.bind(this,e),angular.bind(this,f))}function p(){var a=JSON.parse(localStorage.getItem("kgjsh"));c.loadStuff("http://localhost:8080/sec/resources/account/getallusers",a).then(angular.bind(this,k),angular.bind(this,l))}vm=this,vm.profiletest="Profile Test",vm.myPic="",vm.userId="1",vm.imageId="1",vm.mySharer="Test mySharer",vm.myFile="",vm.uploadPic=function(){console.log("uploadPic IRINA test onChange test",vm.myFile);var a=vm.myFile;console.log("file is "),console.dir(a);var b="resources/file?userid="+vm.userId;d.uploadFileToUrl(a,b).then(angular.bind(this,m),angular.bind(this,n))},vm.addComment=function(a,b){commentData={comment:a,userId:vm.userId,imageId:b},vm.commBody="";var c=JSON.parse(localStorage.getItem("kgjsh"));d.createItem(commentData,"http://localhost:8080/sec/resources/protected/comment",c).then(angular.bind(this,g),angular.bind(this,h))},vm.shareWith=function(a,b){console.log("share with",a);var c={imageId:b,author:vm.userId,victim:a};console.log("sharingObject is: ",c);var e=JSON.parse(localStorage.getItem("kgjsh"));d.createItem(c,"http://localhost:8080/sec/resources/file/shareimage",e).then(angular.bind(this,i),angular.bind(this,j))},vm.logout=function(){console.log("logout")},o(vm.userId),p()}function e(a,b){function c(a,b){var c={id:"d2b97532-e8c5-e411-8270-f0def103cfd0",algorithm:"sha256",key:"7b76ae41-def3-e411-8030-0c8bfd2336cd"},d={credentials:c,ext:"XRequestHeaderToProtect:secret"},e=window.location.href,f=e.split("/");e=f[0]+"//"+f[2];var g=hawk.client.header(e+a,b,d);return null!=g.err?(alert(g.err),null):g}function d(c,d){var e=a.defer(),f=new FormData;return f.append("file",c),b.post(d,f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){console.log("SUCCESS : uploadFileToUrl"),e.resolve()}).error(function(){console.log("ERROR : uploadFileToUrl"),e.reject("Failed to uploadFileToUrl")}),e.promise}function e(d,e,f){var g=a.defer();console.log(d);var h=c(e,"POST");return b({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded",ts:f.Auth.ts,nonce:f.Auth.nonce,mac:f.Auth.mac,accountId:f.accountid,XRequestHeaderToProtect:"secret",Authorization:h.field},data:$.param(d)}).success(function(a){g.resolve(a)}).error(function(){g.reject("Failed to create item")}),g.promise}function f(c,d){var e=a.defer();return console.log(c),b({method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(c)}).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to create item")}),e.promise}function g(d,e){var f=a.defer(),g=c(e,"POST");return b.post(e,d,{transformRequest:angular.identity,headers:{"Content-Type":void 0,XRequestHeaderToProtect:"secret",Authorization:g.field}}).success(function(a){f.resolve(a)}).error(function(){f.reject("Failed to update item")}),f.promise}function h(c,d){var e=a.defer();return b["delete"](d+"/"+c.id).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to delete item with id"+c.id)}),e.promise}var i={createItem:e,createItemAuth:f,updateItem:g,deleteItem:h,uploadFileToUrl:d};return i}function f(a,b){function c(c,d){var e=a.defer();return b({method:"GET",url:c,headers:{"Content-Type":"application/x-www-form-urlencoded",ts:d.Auth.ts,nonce:d.Auth.nonce,mac:d.Auth.mac,accountId:d.accountid}}).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to get stuff from url "+c)}),e.promise}var d={loadStuff:c};return d}a.$inject=["$stateProvider","$urlRouterProvider"],c.$inject=["CrudService"],d.$inject=["$rootScope","$scope","DataService","CrudService"],e.$inject=["$q","$http"],f.$inject=["$q","$http"],angular.element(document).ready(function(g){console.log("angular is ready test");var h=[];h.push("ui.router"),angular.module("mySASSFrontend",h).value("events",{}).controller("AuthCtrl",c).controller("ProfileCtrl",d).directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){console.log("UPLOAAAAAAD"),b.$apply(function(){f(b,c[0].files[0])})})}}}]).factory("CrudService",e).factory("DataService",f).config(a).run(b),angular.bootstrap(angular.element("#ng-app"),["mySASSFrontend"])})}();