"undefined"==typeof File&&(File=function(){return!1}),"undefined"==typeof console&&(console={log:function(){}}),function(){function a(a,b){b.otherwise("/welcome"),a.state("welcome",{url:"/welcome",templateUrl:"views/login.html",controller:"AuthCtrl as auth"}).state("profile",{url:"/profile",templateUrl:"views/profile.html",controller:"ProfileCtrl as profile"})}function b(){}function c(a,b){function c(b){console.log("onLoginSuccess",b),localStorage.setItem("LS",JSON.stringify(b)),a.go("profile","test from onLoginSuccess ###")}function d(a){console.log("onLoginError",a)}function e(b){console.log("onSignupSuccess",b);var c={keyid:b.keyid,accountId:b.accountId};localStorage.setItem("LS",JSON.stringify(c)),a.go("profile","test from onSignupSuccess ###")}function f(a){console.log("onSignupError",a)}vm=this,vm.test="altceva",vm.username="",vm.password="",vm.usernameSignup="",vm.passwordSignup="",vm.login=function(a,e){if(console.log("login clicked!!!",a,e),""!=a&&""!=e){var f={username:a,password:e},g="http://localhost:8080/sec/resources/account/login";b.createItemAuth(f,g).then(angular.bind(this,c),angular.bind(this,d))}else console.log("username and pass are required")},vm.signup=function(a,c){if(console.log("signup"),""!=a&&""!=c){var d={username:a,password:c,email:a},g="http://localhost:8080/sec/resources/account/create";b.createItemAuth(d,g).then(angular.bind(this,e),angular.bind(this,f))}else console.log("signup failed")}}function d(a,b,c,d,e){function f(a){console.log("onLoadImagsSuccess RIGHT ONE"),_(a).forEach(function(a){function b(b){console.log("onLoadImageCommentsSuccess",b),b.error?console.log("DATA ERROR onLoadImageCommentsSuccess"):a.imageComments=b}function c(a){console.log("onLoadImageCommentsError: no comments found for this image",a)}console.log(a),a.showComments=!1;JSON.parse(localStorage.getItem("LS"));d.loadStuff("http://localhost:8080/sec/resources/protected/comment?imageId="+a.imageid).then(angular.bind(this,b),angular.bind(this,c))}),console.log("Images after adding comments are: ",a),vm.pictures=a,b.$$phase||b.$digest()}function g(a){console.log("onLoadImagsError",a)}function h(a){console.log("onCreateCommentSuccess",a),p(vm.userId)}function i(a){console.log("onCreateCommentError",a)}function j(a){console.log("onSharePicSuccess",a)}function k(a){console.log("onSharePicError",a)}function l(a){console.log("onLoadUsersSuccess USEEEEERS",a),vm.users=a}function m(a){console.log("onLoadUsersError",a)}function n(){console.log("onUploadSuccess: final from ProfileCtrl"),p(vm.userId),b.$$phase||b.$digest(),console.log("### Tried to get all images ###")}function o(a){console.log("onUploadError: final from ProfileCtrl",a)}function p(a){JSON.parse(localStorage.getItem("LS"));d.loadStuff("http://localhost:8080/sec/resources/protected/file/getallimages?id="+a).then(angular.bind(this,f),angular.bind(this,g))}function q(){JSON.parse(localStorage.getItem("LS"));d.loadStuff("http://localhost:8080/sec/resources/protected/account/getallusers").then(angular.bind(this,l),angular.bind(this,m))}function r(a){console.log("stabilizeLoggedInUser")}function s(a,b,c,d,e){console.log("ON STATE CHANGE SUCCESS!!!!!!!!!!!!!!!!!!",a,b,c,d,e,"!!!!!!!!!!!!!!!!"),r(d.name)}vm=this,vm.profiletest="Profile Test",vm.myPic="",vm.userId="1",vm.imageId="1",vm.mySharer="Test mySharer",vm.myFile="",vm.uploadPic=function(){console.log("uploadPic IRINA test onChange test",vm.myFile);var a=vm.myFile;console.log("file is "),console.dir(a);var b="resources/protected/file?userid="+vm.userId;e.uploadFileToUrl(a,b).then(angular.bind(this,n),angular.bind(this,o))},vm.addComment=function(a,b){commentData={comment:a,userId:vm.userId,imageId:b},vm.commBody="";var c=JSON.parse(localStorage.getItem("LS"));e.createItem(commentData,"http://localhost:8080/sec/resources/protected/comment",c).then(angular.bind(this,h),angular.bind(this,i))},vm.shareWith=function(a,b){console.log("share with",a);var c={imageId:b,author:vm.userId,victim:a};console.log("sharingObject is: ",c);var d=JSON.parse(localStorage.getItem("LS"));e.createItem(c,"http://localhost:8080/sec/resources/protected/file/shareimage",d).then(angular.bind(this,j),angular.bind(this,k))},vm.logout=function(){localStorage.removeItem("LS"),console.log("logout"),c.go("welcome")},p(vm.userId),q(),a.$on("$stateChangeSuccess",s)}function e(a,b,c){function d(a,b){var d=JSON.parse(localStorage.getItem("LS"));if(null==d)return console.log("myLS is null -- from createAuthorizationHeader -- from CrudService"),void c.go("welcome");var e={id:d.accountId,algorithm:"sha256",key:d.keyid},f={credentials:e},g=window.location.href,h=g.split("/");g=h[0]+"//"+h[2];var i=hawk.client.header(a,b,f);return console.log("uploadUrl: "+a),null!=i.err?(alert(i.err),null):i}function e(c,e){var f=a.defer(),g=d(e,"POST"),h=new FormData;return h.append("file",c),b.post(e,h,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:g.field}}).success(function(){console.log("SUCCESS : uploadFileToUrl"),f.resolve()}).error(function(){console.log("ERROR : uploadFileToUrl"),f.reject("Failed to uploadFileToUrl")}),f.promise}function f(c,e,f){var g=a.defer();console.log(c);var h=d(e,"POST");return b({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:h.field},data:$.param(c)}).success(function(a){g.resolve(a)}).error(function(){g.reject("Failed to create item")}),g.promise}function g(c,d){var e=a.defer();return console.log(c+" "+d),b({method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(c)}).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to create item")}),e.promise}function h(c,e){var f=a.defer(),g=d(e,"POST");return b.post(e,c,{transformRequest:angular.identity,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:g.field}}).success(function(a){f.resolve(a)}).error(function(){f.reject("Failed to update item")}),f.promise}function i(c,d){var e=a.defer();return b["delete"](d+"/"+c.id).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to delete item with id"+c.id)}),e.promise}var j={createItem:f,createItemAuth:g,updateItem:h,deleteItem:i,uploadFileToUrl:e};return j}function f(a,b,c){function d(a,b){console.log("### createAuthorizationHeader #####");var d=JSON.parse(localStorage.getItem("LS"));if(null==d)return console.log("myLS is null -- from createAuthorizationHeader -- from DataService"),void c.go("welcome");console.log("### got myLS #####",d);var e={id:d.accountId,algorithm:"sha256",key:d.keyid},f={credentials:e},g=window.location.href,h=g.split("/");g=h[0]+"//"+h[2];var i=hawk.client.header(a,b,f);return console.log("uploadUrl: "+a),null!=i.err?null:i}function e(c){var e=a.defer(),f=d(c,"GET");return null==f?void console.log("header == null -- from DataService -- from loadStuff"):(b({method:"GET",url:c,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:f.field}}).success(function(a){e.resolve(a)}).error(function(){e.reject("Failed to get stuff from url "+c)}),e.promise)}var f={loadStuff:e};return f}a.$inject=["$stateProvider","$urlRouterProvider"],c.$inject=["$state","CrudService"],d.$inject=["$rootScope","$scope","$state","DataService","CrudService"],e.$inject=["$q","$http","$state"],f.$inject=["$q","$http","$state"],angular.element(document).ready(function(g){console.log("angular is ready test");var h=[];h.push("ui.router"),angular.module("mySASSFrontend",h).value("events",{}).controller("AuthCtrl",c).controller("ProfileCtrl",d).directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){console.log("UPLOAAAAAAD"),b.$apply(function(){f(b,c[0].files[0])})})}}}]).factory("CrudService",e).factory("DataService",f).config(a).run(b),angular.bootstrap(angular.element("#ng-app"),["mySASSFrontend"])})}();